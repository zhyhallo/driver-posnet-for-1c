<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Driver POSNET / Thermal –¥–ª—è 1–°:Enterprise ‚Äì –∫—É–ø–∏—Ç–∏ / —Ü—ñ–Ω–∞ / —Ñ—É–Ω–∫—Ü—ñ—ó</title>
    <meta name="description" content="–ì–æ—Ç–æ–≤–∞ –∑–æ–≤–Ω—ñ—à–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ POSNET / Thermal —Ä–µ—î—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –≤ 1–°:Enterprise. –ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å, —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å, —Ç–µ—Ö–ø—ñ–¥—Ç—Ä–∏–º–∫–∞. –¶—ñ–Ω–∞ 1500 –∑–ª.">
    
    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://my.zadarma.com">
    
    <!-- Load critical font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Preload critical CSS -->
    <link href="/src/main.css" rel="stylesheet" />
    
    <!-- Add favicon for better UX -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
</head>

<body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Load Zadarma widget with enhanced loading -->
    <script type="text/javascript">
        (function() {
            // Widget configuration
            window.ZCallbackWidgetLinkId = 'edec1cbf8a1f75508f534464a2b4fa55';
            window.ZCallbackWidgetDomain = 'my.zadarma.com';
            
            let loadAttempts = 0;
            const maxAttempts = 3;
            let isLoading = false;
            
            function loadZadarmaWidget() {
                // Prevent double loading and multiple instances
                if (isLoading || window.ZCallbackWidget || document.querySelector('[src*="zadarma"]')) {
                    console.log('‚úÖ Zadarma widget already loaded or loading');
                    return;
                }
                
                isLoading = true;
                loadAttempts++;
                console.log(`üîÑ Loading Zadarma widget (attempt ${loadAttempts}/${maxAttempts})...`);
                
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.charset = 'utf-8';
                script.async = true;
                script.src = `https://${window.ZCallbackWidgetDomain}/callbackWidget/js/main.min.js?v=1.15.4&t=${Date.now()}`;
                
                script.onload = function() {
                    console.log('‚úÖ Zadarma widget script loaded successfully');
                    isLoading = false;
                    
                    // Wait for widget to initialize and hide duplicates
                    setTimeout(() => {
                        const widgets = document.querySelectorAll(
                            '#z-callback-widget-button, .z-callback-widget-button, [id*="zadarma"], [class*="zadarma"], [id*="callback"], [class*="callback"]'
                        );
                        
                        if (widgets.length > 0) {
                            console.log(`‚úÖ Found ${widgets.length} Zadarma widget(s), keeping only the first one`);
                            
                            // Hide all but first widget
                            widgets.forEach((widget, index) => {
                                if (index > 0) {
                                    widget.style.display = 'none !important';
                                }
                            });
                        } else {
                            console.warn('‚ö†Ô∏è Zadarma widget script loaded but widget not found');
                        }
                    }, 1000);
                };
                
                script.onerror = function() {
                    console.warn(`‚ùå Failed to load Zadarma widget script (attempt ${loadAttempts})`);
                    isLoading = false;
                    
                    // Retry loading if we haven't reached max attempts
                    if (loadAttempts < maxAttempts) {
                        setTimeout(loadZadarmaWidget, 2000 * loadAttempts);
                    } else {
                        console.error('‚ùå Failed to load Zadarma widget after all attempts');
                    }
                };
                
                // Add to head for better loading
                document.head.appendChild(script);
            }
            
            // Multiple loading strategies
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', loadZadarmaWidget);
            } else if (document.readyState === 'interactive') {
                setTimeout(loadZadarmaWidget, 100);
            } else {
                loadZadarmaWidget();
            }
            
            // Backup loading after window fully loads
            window.addEventListener('load', function() {
                setTimeout(function() {
                    if (!document.querySelector('[id*="callback"], [class*="callback"], [id*="zadarma"], [class*="zadarma"]')) {
                        console.log('üîÑ Backup attempt: Retrying Zadarma widget load...');
                        loadZadarmaWidget();
                    }
                }, 3000);
            });
            
        })();
    </script>
</body>

</html>
